# Spaceship Prompt Implementation Guide

This document explains how the spaceship-prompt style is implemented in the terminal and how to customize or extend it.

## Prompt Structure

The spaceship-style prompt consists of three main parts:

1. **Top Line**: Contains primary information (user, host, directory, git)
2. **Middle Line**: Contains secondary information (language versions, execution time, status)
3. **Bottom Line**: Contains the actual prompt character

```
â”Œâ”€[username@hostname] in ~/directory on âŽ‡ branch [status]
â”œâ”€[â¬¢ node-version] [â± execution-time] [âœ“]
â””â”€âžœ 
```

## ANSI Color Implementation

The prompt colors are implemented using ANSI escape sequences:

```javascript
const STYLES = {
  user: `\x1b[1;36m`,      // Cyan, bright
  separator: `\x1b[2;37m`, // White, dim
  host: `\x1b[1;36m`,      // Cyan, bright
  directory: `\x1b[1;35m`, // Purple, bright
  git: `\x1b[1;38;5;213m`, // Bright pink
  nodejs: `\x1b[1;38;5;41m`, // Node.js green
  time: `\x1b[1;33m`,      // Yellow, bright
  symbol: `\x1b[1;38;5;105m`, // Light purple
  reset: `\x1b[0m`,        // Reset all styles
  promptChar: `\x1b[1;38;5;105mâžœ\x1b[0m`, // The prompt character with styling
};
```

## Prompt Generation Function

The prompt is generated by the `generateSpaceshipPrompt` function in `Terminal.jsx`:

```javascript
const generateSpaceshipPrompt = () => {
  // Get username, hostname
  const username = 'astronaut';
  const hostname = 'spacecraft';
  
  // Format current path for display
  const formattedPath = currentPath.replace(/^~\//, '');
  
  // Get git information if available
  const gitInfo = getGitInfo(currentPath);
  
  // Get node version for JS projects (simulated)
  const nodeInfo = currentPath.includes('projects') ? 'v18.12.1' : null;
  
  // Format execution time if available
  const timeInfo = lastCommandExecutionTime ? 
    `took ${lastCommandExecutionTime.toFixed(2)}s` : null;
  
  // Build the top line
  let topLine = `â”Œâ”€[${STYLES.user}${username}${STYLES.reset}${STYLES.separator}@${STYLES.reset}${STYLES.host}${hostname}${STYLES.reset}] `;
  topLine += `${STYLES.separator}in${STYLES.reset} ${STYLES.directory}${formattedPath}${STYLES.reset}`;
  
  // Add git information if available
  if (gitInfo) {
    topLine += ` ${STYLES.separator}on${STYLES.reset} ${STYLES.git}âŽ‡ ${gitInfo.branch}${STYLES.reset}`;
    if (gitInfo.status && gitInfo.status.length > 0) {
      topLine += ` ${STYLES.git}[${gitInfo.status.join(' ')}]${STYLES.reset}`;
    }
  }
  
  // Create the middle line with additional context
  let middleLine = '';
  const middleItems = [];
  
  // Add node version if available
  if (nodeInfo) {
    middleItems.push(`${STYLES.nodejs}â¬¢ ${nodeInfo}${STYLES.reset}`);
  }
  
  // Add execution time if significant
  if (timeInfo) {
    middleItems.push(`${STYLES.time}â± ${timeInfo}${STYLES.reset}`);
  }
  
  // Add last command status
  if (lastCommand) {
    const statusSymbol = lastCommandStatus === 0 ? 
      `${STYLES.green}âœ“${STYLES.reset}` : 
      `${STYLES.red}âœ— ${lastCommandStatus}${STYLES.reset}`;
    middleItems.push(statusSymbol);
  }
  
  // Only create middle line if we have items to show
  if (middleItems.length > 0) {
    middleLine = `â”œâ”€[${middleItems.join('] [')}]\r\n`;
  }
  
  // Create the bottom line with prompt symbol
  const bottomLine = `â””â”€${STYLES.promptChar} `;
  
  return {
    topLine,
    middleLine,
    bottomLine
  };
};
```

## Available Prompt Sections

| Section | Description | Symbol |
|---------|-------------|--------|
| User & Host | Current username and hostname | @ |
| Directory | Current working directory | ~ |
| Git Branch | Git branch name | âŽ‡ |
| Git Status | Git repository status | âš‘ âœš âœ± |
| Node.js | Node.js version | â¬¢ |
| Execution Time | Command execution time | â± |
| Exit Status | Command result status | âœ“ âœ— |

## Git Status Symbols

| Symbol | Meaning |
|--------|---------|
| âš‘ | Branch has tracking information |
| âœš | Uncommitted changes |
| âœ± | Changes in working directory |
| ? | Untracked files |
| ! | Renamed files |
| â†‘ | Ahead of remote branch |
| â†“ | Behind remote branch |

## How to Add a New Prompt Section

To add a new prompt section (for example, Python version):

1. Add the section to the settings:

```javascript
// In terminalStore.js
settings: {
  promptSections: {
    // ...existing sections
    python: true,
  }
}
```

2. Add a new color style:

```javascript
// In Terminal.jsx
const STYLES = {
  // ...existing styles
  python: `\x1b[1;38;5;33m`, // Python blue
};
```

3. Add the section to the prompt generation function:

```javascript
// In generateSpaceshipPrompt function
// Get Python version for Python projects (simulated)
const pythonInfo = currentPath.includes('python') ? 'v3.11.4' : null;

// Add Python information if available and enabled
if (pythonInfo && settings.promptSections.python) {
  middleItems.push(`${STYLES.python}ðŸ ${pythonInfo}${STYLES.reset}`);
}
```

## How to Modify Existing Sections

To modify an existing section:

1. Locate the section in the `generateSpaceshipPrompt` function
2. Modify the style, content, or conditional logic as needed
3. Test with different terminal states to ensure it displays correctly

## Prompt Display Function

The prompt is displayed using the `displayPromptString` function:

```javascript
const displayPromptString = () => {
  if (!xtermRef.current) return;
  
  // Get the multi-line prompt
  const { topLine, middleLine, bottomLine } = generateSpaceshipPrompt();
  
  // Write each line of the prompt
  xtermRef.current.write('\r\n' + topLine + '\r\n');
  if (middleLine) {
    xtermRef.current.write(middleLine);
  }
  xtermRef.current.write(bottomLine);
};
```

## Customization Options

Users can customize the prompt through the settings:

1. **Toggle Sections**: Enable/disable specific prompt sections
2. **Change Colors**: Modify the color scheme for different sections
3. **Adjust Symbols**: Change the symbols used for different states
4. **Modify Layout**: Change the overall prompt layout and structure

The settings are managed through the Zustand store in `terminalStore.js` and can be modified via the Settings UI or programmatically.